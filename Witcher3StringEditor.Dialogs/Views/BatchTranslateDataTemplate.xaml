<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:iwk="http://schemas.inkore.net/lib/ui/wpf"
    xmlns:l="clr-namespace:Witcher3StringEditor.Locales;assembly=Witcher3StringEditor.Locales"
    xmlns:i18n="clr-namespace:System.Windows;assembly=Antelcat.I18N.WPF"
    xmlns:ui="http://schemas.inkore.net/lib/ui/wpf/modern"
    xmlns:vm="clr-namespace:Witcher3StringEditor.Dialogs.ViewModels">
    <!-- 
        Data template for batch translation view
        This template is used to display the UI for batch translation operations
        Binds to BatchItemsTranslationViewModel for data and command binding
    -->
    <DataTemplate x:Key="BatchTranslateDataTemplate" DataType="{x:Type vm:BatchItemsTranslationViewModel}">
        <Grid>
            <Grid.RowDefinitions>
                <!-- Language selection and index input controls row -->
                <RowDefinition Height="Auto" />
                <!-- Translation statistics row -->
                <RowDefinition Height="Auto" />
                <!-- Status row -->
                <RowDefinition Height="Auto" />
                <!-- Action buttons row -->
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            <!-- Language selection and index input controls -->
            <iwk:SimpleStackPanel Spacing="16">
                <!-- Source language selection combobox -->
                <ComboBox
                    HorizontalAlignment="Stretch"
                    ui:ControlHelper.Header="{i18n:I18N {x:Static l:LangKeys.TextLanguage}}"
                    DisplayMemberPath="NativeName"
                    ItemsSource="{Binding Languages}"
                    SelectedValue="{Binding FormLanguage}" />
                <!-- Target language selection combobox -->
                <ComboBox
                    HorizontalAlignment="Stretch"
                    ui:ControlHelper.Header="{i18n:I18N {x:Static l:LangKeys.TargetLanguage}}"
                    DisplayMemberPath="NativeName"
                    ItemsSource="{Binding Languages}"
                    SelectedValue="{Binding ToLanguage}" />
                <!-- Start index input control -->
                <ui:NumberBox
                    x:Name="StartIndexInput"
                    ui:ControlHelper.Header="{i18n:I18N {x:Static l:LangKeys.StartIndex}}"
                    Maximum="{Binding MaxValue, Mode=OneTime}"
                    Minimum="1"
                    SmallChange="1"
                    SpinButtonPlacementMode="Inline"
                    Value="{Binding StartIndex}" />
                <!-- End index input control -->
                <ui:NumberBox
                    x:Name="EndIndexInput"
                    ui:ControlHelper.Header="{i18n:I18N {x:Static l:LangKeys.EndIndex}}"
                    Maximum="{Binding MaxValue, Mode=OneTime}"
                    Minimum="{Binding EndIndexMin}"
                    SmallChange="1"
                    SpinButtonPlacementMode="Inline"
                    Value="{Binding EndIndex}" />
            </iwk:SimpleStackPanel>
            <!-- Translation statistics display area -->
            <StackPanel
                Grid.Row="1"
                Margin="0,16"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                Orientation="Horizontal">
                <!-- Success count indicator -->
                <Ellipse
                    Width="35"
                    Height="35"
                    Fill="Green"
                    ToolTip="{i18n:I18N {x:Static l:LangKeys.Success}}" />
                <TextBlock
                    Width="Auto"
                    MinWidth="70"
                    Margin="8,0,16,0"
                    VerticalAlignment="Center"
                    FontSize="25"
                    Text="{Binding SuccessCount}"
                    TextAlignment="Center" />
                <!-- Failure count indicator -->
                <Ellipse
                    Width="35"
                    Height="35"
                    Fill="Red"
                    ToolTip="{i18n:I18N {x:Static l:LangKeys.Failure}}" />
                <TextBlock
                    Width="Auto"
                    MinWidth="70"
                    Margin="8,0,16,0"
                    VerticalAlignment="Center"
                    FontSize="25"
                    Text="{Binding FailureCount}"
                    TextAlignment="Center" />
                <!-- Pending count indicator -->
                <Ellipse
                    Width="35"
                    Height="35"
                    Fill="Orange"
                    ToolTip="{i18n:I18N {x:Static l:LangKeys.Pending}}" />
                <TextBlock
                    Width="Auto"
                    MinWidth="70"
                    Margin="8,0,16,0"
                    VerticalAlignment="Center"
                    FontSize="25"
                    Text="{Binding PendingCount}"
                    TextAlignment="Center" />
            </StackPanel>
            <!-- Action buttons for starting and canceling translation -->
            <TextBlock
                Grid.Row="2"
                Margin="0,0,0,12"
                HorizontalAlignment="Center"
                FontSize="11"
                Opacity="0.65"
                Text="{Binding StatusMessage}"
                TextTrimming="CharacterEllipsis"
                TextWrapping="Wrap" />
            <iwk:SimpleStackPanel
                Grid.Row="3"
                HorizontalAlignment="Center"
                Orientation="Horizontal"
                Spacing="16">
                <!-- Start translation button -->
                <Button
                    MinWidth="100"
                    Command="{Binding StartCommand}"
                    Content="{i18n:I18N {x:Static l:LangKeys.TranslateBtnContent}}">
                    <Button.Style>
                        <!-- ReSharper disable once Xaml.StaticResourceNotResolved -->
                        <Style BasedOn="{StaticResource DefaultButtonStyle}" TargetType="Button">
                            <!-- Button is disabled by default -->
                            <Setter Property="IsEnabled" Value="False" />
                            <Style.Triggers>
                                <!-- Enable button only when both index inputs are valid -->
                                <MultiDataTrigger>
                                    <MultiDataTrigger.Conditions>
                                        <Condition
                                            Binding="{Binding ElementName=StartIndexInput, Path=(Validation.HasError)}"
                                            Value="False" />
                                        <Condition
                                            Binding="{Binding ElementName=EndIndexInput, Path=(Validation.HasError)}"
                                            Value="False" />
                                    </MultiDataTrigger.Conditions>
                                    <Setter Property="IsEnabled" Value="True" />
                                </MultiDataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                </Button>
                <!-- Cancel translation button -->
                <Button
                    MinWidth="100"
                    Command="{Binding CancelCommand}"
                    Content="{i18n:I18N {x:Static l:LangKeys.CancelBtnContent}}" />
            </iwk:SimpleStackPanel>
        </Grid>
    </DataTemplate>
</ResourceDictionary>
